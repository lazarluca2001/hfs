<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WSDC Szintlépés Kalkulátor</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; max-width: 800px; margin: 20px auto; padding: 20px; background-color: #f4f4f9; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        select, input { padding: 10px; margin: 10px 0; width: 100%; border: 1px solid #ddd; border-radius: 4px; }
        .result { margin-top: 20px; padding: 15px; background: #e7f3ff; border-left: 5px solid #2196F3; }
        h2 { color: #333; }
        .tier-info { font-size: 0.9em; color: #666; }
    </style>
</head>
<body>

<div class="card">
    <h2>WSDC Divízió Kalkulátor</h2>
    
    <label for="currentDivision">Jelenlegi szinted:</label>
    <select id="currentDivision" onchange="calculate()">
        <option value="Newcomer">Newcomer</option>
        <option value="Novice">Novice</option>
        <option value="Intermediate">Intermediate</option>
        <option value="Advanced">Advanced</option>
        <option value="All Star">All Star</option>
    </select>

    <label for="currentPoints">Jelenlegi pontjaid száma:</label>
    <input type="number" id="currentPoints" value="0" min="0" oninput="calculate()">

    <label for="targetTier">Mekkora versenyre készülsz? (Tier):</label>
    <select id="targetTier" onchange="calculate()">
        <option value="1">Tier 1 (5-10 fő)</option>
        <option value="2">Tier 2 (11-19 fő)</option>
        <option value="3">Tier 3 (20-39 fő)</option>
        <option value="4">Tier 4 (40-79 fő)</option>
        <option value="5">Tier 5 (80-129 fő)</option>
        <option value="6">Tier 6 (130+ fő)</option>
    </select>

    <div id="result" class="result">
        Adj meg adatokat a számításhoz!
    </div>
</div>

<script>
const rules = {
    "Newcomer": { next: "Novice", allowed: 0, required: 1 },
    "Novice": { next: "Intermediate", allowed: 16, required: 30 },
    "Intermediate": { next: "Advanced", allowed: 30, required: 45 },
    "Advanced": { next: "All Star", allowed: 60, required: 90 },
    "All Star": { next: "Champion", allowed: 150, required: 225 }
};

const tierPoints = {
    1: [3, 2, 1],
    2: [6, 4, 3, 2, 1],
    3: [10, 8, 6, 4, 2, 1],
    4: [15, 12, 10, 8, 6, 1],
    5: [20, 16, 14, 12, 10, 2],
    6: [25, 22, 18, 15, 12, 2]
};

function calculate() {
    const div = document.getElementById('currentDivision').value;
    const points = parseInt(document.getElementById('currentPoints').value) || 0;
    const tier = document.getElementById('targetTier').value;
    const rule = rules[div];
    
    let allowedDiff = Math.max(0, rule.allowed - points);
    let requiredDiff = Math.max(0, rule.required - points);
    
    let text = `<strong>Következő szint: ${rule.next}</strong><br>`;
    
    if (div === "Newcomer") {
        text += "Bármikor felnevezhetsz (Allowed), de 1 pont után kötelező!";
    } else {
        text += `Még <strong>${allowedDiff}</strong> pont kell, hogy felnevezhess.<br>`;
        text += `Még <strong>${requiredDiff}</strong> pont kell, hogy kötelező legyen szintet lépned.<br><br>`;
        
        // Kiszámoljuk, milyen helyezés kell a Tier alapján
        const possiblePoints = tierPoints[tier];
        let bestResult = "";
        
        for (let i = 0; i < possiblePoints.length; i++) {
            if (possiblePoints[i] >= allowedDiff) {
                bestResult = (i + 1) + ". helyezés";
            }
        }
        
        if (bestResult) {
            text += `Ezen a versenyen egy <strong>${bestResult}</strong> már elég a "Mehet" szinthez!`;
        } else {
            text += "Ezen a versenyen még az 1. hely sem elég a szintlépéshez.";
        }
    }
    
    document.getElementById('result').innerHTML = text;
}

// Kezdő futtatás
calculate();
</script>

</body>
</html>
