<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WSDC All Star Kalkulátor</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; max-width: 800px; margin: 20px auto; padding: 20px; background-color: #f0f2f5; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { color: #1a73e8; border-bottom: 2px solid #e8eaed; padding-bottom: 10px; }
        label { font-weight: bold; display: block; margin-top: 15px; }
        select, input { padding: 12px; margin: 8px 0; width: 100%; border: 1px solid #dadce0; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        .result-box { margin-top: 25px; padding: 20px; border-radius: 8px; font-size: 16px; }
        .next-level { background: #e7f3ff; border-left: 5px solid #2196F3; margin-bottom: 15px; padding: 15px; }
        .all-star-goal { background: #fff4e5; border-left: 5px solid #ff9800; padding: 15px; }
        .highlight { font-weight: bold; color: #d93025; }
        .tier-hint { font-style: italic; color: #5f6368; margin-top: 10px; font-size: 0.9em; }
    </style>
</head>
<body>

<div class="card">
    <h2>WSDC Szintlépés & All Star Útmutató</h2>
    
    <label for="currentDivision">Jelenlegi divíziód:</label>
    <select id="currentDivision" onchange="calculate()">
        <option value="Newcomer">Newcomer</option>
        <option value="Novice">Novice</option>
        <option value="Intermediate">Intermediate</option>
        <option value="Advanced">Advanced</option>
        <option value="All Star">All Star</option>
    </select>

    <label for="currentPoints">Jelenlegi pontjaid a mostani szinteden:</label>
    <input type="number" id="currentPoints" value="0" min="0" oninput="calculate()">

    <label for="targetTier">Következő versenyed mérete (Tier):</label>
    <select id="targetTier" onchange="calculate()">
        <option value="1">Tier 1 (5-10 pár)</option>
        <option value="2">Tier 2 (11-19 pár)</option>
        <option value="3">Tier 3 (20-39 pár)</option>
        <option value="4">Tier 4 (40-79 pár)</option>
        <option value="5">Tier 5 (80-129 pár)</option>
        <option value="6">Tier 6 (130+ pár)</option>
    </select>

    <div id="nextLevelResult" class="next-level"></div>
    <div id="allStarResult" class="all-star-goal"></div>
</div>

<script>
const rules = {
    "Newcomer": { order: 0, next: "Novice", allowed: 0, required: 1 },
    "Novice": { order: 1, next: "Intermediate", allowed: 16, required: 30 },
    "Intermediate": { order: 2, next: "Advanced", allowed: 30, required: 45 },
    "Advanced": { order: 3, next: "All Star", allowed: 60, required: 90 },
    "All Star": { order: 4, next: "Champion", allowed: 150, required: 225 }
};

const tierPoints = {
    1: [3, 2, 1], 2: [6, 4, 3, 2, 1], 3: [10, 8, 6, 4, 2, 1],
    4: [15, 12, 10, 8, 6, 1], 5: [20, 16, 14, 12, 10, 2], 6: [25, 22, 18, 15, 12, 2]
};

function calculate() {
    const currentDiv = document.getElementById('currentDivision').value;
    const points = parseInt(document.getElementById('currentPoints').value) || 0;
    const tier = document.getElementById('targetTier').value;
    
    // 1. KÖVETKEZŐ SZINT SZÁMÍTÁSA
    const rule = rules[currentDiv];
    let nextLevelHtml = `<strong>Következő cél: ${rule.next}</strong><br>`;
    
    if (currentDiv === "All Star") {
        nextLevelHtml += "Már All Star vagy! Irány a Champion szint.";
    } else {
        let allowedDiff = Math.max(0, rule.allowed - points);
        let requiredDiff = Math.max(0, rule.required - points);
        
        nextLevelHtml += `A szintlépéshez (Allowed) kell még: <span class="highlight">${allowedDiff}</span> pont.<br>`;
        nextLevelHtml += `A kötelező szintlépéshez (Required) kell még: <span class="highlight">${requiredDiff}</span> pont.<br>`;
        
        const possiblePoints = tierPoints[tier];
        let placeNeeded = "";
        for (let i = 0; i < possiblePoints.length; i++) {
            if (possiblePoints[i] >= allowedDiff) placeNeeded = (i + 1) + ". helyezés";
        }
        if (placeNeeded) nextLevelHtml += `<div class="tier-hint">Ezen a versenyen egy ${placeNeeded} már elég a felnevezéshez!</div>`;
    }
    document.getElementById('nextLevelResult').innerHTML = nextLevelHtml;

    // 2. ALL STAR ÚT SZÁMÍTÁSA (Mennyi pont kell összesen az All Star-ig)
    let totalMinToAllStar = 0;
    let totalMaxToAllStar = 0;

    const divOrder = ["Newcomer", "Novice", "Intermediate", "Advanced"];
    let reachedCurrent = false;

    for (let d of divOrder) {
        if (d === currentDiv) reachedCurrent = true;
        
        if (reachedCurrent) {
            if (d === currentDiv) {
                totalMinToAllStar += Math.max(0, rules[d].allowed - points);
                totalMaxToAllStar += Math.max(0, rules[d].required - points);
            } else {
                totalMinToAllStar += rules[d].allowed;
                totalMaxToAllStar += rules[d].required;
            }
        }
        if (d === "Advanced") break; // Itt állunk meg, mert az Advanced pontok után leszel All Star
    }

    let allStarHtml = "<strong>Út az All Star-ig:</strong><br>";
    if (currentDiv === "All Star") {
        allStarHtml += "Gratulálunk, elérted a célodat!";
    } else {
        allStarHtml += `Összesen még minimum <span class="highlight">${totalMinToAllStar}</span> pont kell (ha mindig a legkorábban lépsz szintet).<br>`;
        allStarHtml += `Összesen maximum <span class="highlight">${totalMaxToAllStar}</span> pont kell (ha minden szintet kimaxolsz a kényszerítésig).`;
    }
    document.getElementById('allStarResult').innerHTML = allStarHtml;
}

calculate();
</script>

</body>
</html>
